{"version":3,"file":"main-09a6db7d.js","sources":["../../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst moreBtn = document.querySelector('.more-btn');\nlet page = 1;\nlet perPage = 40;\nlet currentSearch = '';\n\nconst imageResult = document.querySelector('#image-result');\nconst loader = document.createElement('span');\nloader.classList.add('loader');\n\nconst imageList = document.querySelector('.image-list');\nconst lightbox = new SimpleLightbox('.image-list a');\n\nasync function fetchPics(search, page, perPage) {\n  const params = new URLSearchParams({\n    key: '45031413-5a86df50e03b9d2dcce76b542',\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n  return response.data;\n}\n\nfunction renderPics(pics) {\n  pics.forEach(hit => {\n    const li = document.createElement('li');\n    const link = document.createElement('a');\n    link.href = hit.largeImageURL;\n    link.classList.add('image-link');\n    const img = document.createElement('img');\n    img.src = hit.webformatURL;\n    img.alt = hit.tags;\n    link.appendChild(img);\n    li.appendChild(link);\n    li.innerHTML += `<div class=\"properties\">\n      <div class=\"property\"><span class=\"property-name\">Likes</span> <span class=\"property-value\">${hit.likes}</span></div>\n      <div class=\"property\"><span class=\"property-name\">Views</span> <span class=\"property-value\">${hit.views}</span></div>\n      <div class=\"property\"><span class=\"property-name\">Comments</span> <span class=\"property-value\">${hit.comments}</span></div>\n      <div class=\"property\"><span class=\"property-name\">Downloads</span> <span class=\"property-value\">${hit.downloads}</span></div>\n    </div>`;\n    imageList.appendChild(li);\n  });\n\n  lightbox.refresh();\n}\n\nfunction checkIfMorePics(pics) {\n  if (pics.length < perPage) {\n    moreBtn.style.display = 'none';\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results\",\n      backgroundColor: 'lightblue',\n      position: 'topRight',\n    });\n  } else {\n    moreBtn.style.display = 'block';\n  }\n}\n\nfunction smoothScroll() {\n  const firstImageItem = document.querySelector('.image-list li');\n  if (firstImageItem) {\n    const itemHeight = firstImageItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n}\n\ndocument\n  .querySelector('.search-form')\n  .addEventListener('submit', async event => {\n    event.preventDefault();\n    const search = document.querySelector('#search').value;\n    currentSearch = search;\n    page = 1;\n    imageList.innerHTML = '';\n    imageResult.appendChild(loader);\n    moreBtn.style.display = 'none';\n\n    try {\n      const pics = await fetchPics(search, page, perPage);\n      loader.remove();\n      if (pics.hits.length > 0) {\n        renderPics(pics.hits);\n        page += 1;\n        checkIfMorePics(pics.hits);\n      } else {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#EF4040',\n          messageColor: '#fff',\n          iconColor: '#fff',\n          position: 'topRight',\n        });\n      }\n    } catch (error) {\n      loader.remove();\n      iziToast.error({\n        title: 'Error',\n        message: 'Something is wrong with the code again :(',\n      });\n    }\n  });\n\nmoreBtn.addEventListener('click', async () => {\n  imageResult.appendChild(loader);\n  moreBtn.style.display = 'none';\n  try {\n    const pics = await fetchPics(currentSearch, page, perPage);\n    renderPics(pics.hits);\n    page += 1;\n    loader.remove();\n    checkIfMorePics(pics.hits);\n    smoothScroll();\n  } catch (error) {\n    console.log(error);\n    loader.remove();\n    moreBtn.style.display = 'block';\n  }\n});\n"],"names":["moreBtn","page","perPage","currentSearch","imageResult","loader","imageList","lightbox","SimpleLightbox","fetchPics","search","params","axios","renderPics","pics","hit","li","link","img","checkIfMorePics","iziToast","smoothScroll","firstImageItem","itemHeight","event","error"],"mappings":"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"}